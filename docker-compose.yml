version: "3.1"

services:
  scraper:
    build:
      context: .
    volumes: 
      - ./twitter4j.properties:/app/twitter4j.properties
    links:
      - twitterscraper-db

  server:
    build:
      context: .
    links:
      - twitterscraper-db
    ports:
      - 4568:8080
    environment:
      MODE: server

  twitterscraper-db:
    image: mongo:latest
    volumes:
      - DB:/data/db
    restart: always
    environment:
      spring.data.mongodb.host: mongodb

volumes:
  DB:

networks:
  default:
    external:
      name: twitternet
